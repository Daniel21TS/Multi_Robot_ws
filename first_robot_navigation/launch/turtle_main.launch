<?xml version="1.0" encoding="UTF-8" ?>


<launch>

  <param name="use_sim_time" value="true"/>
  <arg name="first_tb3"  default="robot1"/>
  <arg name="second_tb3" default="robot2"/>
  
  <!--Spawn Robots And Map-->
  <include file="$(find first_robot_navigation)/launch/multi_robot_spawn.launch"/>

  <!--Gmapping Robo 1 -->
  <include file="$(find first_robot_navigation)/launch/gmapping.launch">
    <arg name="ns" value="robot1"/>
  </include> 

  <!--Gmapping Robo 2 -->
  <include file="$(find first_robot_navigation)/launch/gmapping.launch">
    <arg name="ns" value="robot2"/>
  </include> 

  <!--OGmapping Robo 1 
  <include file="$(find first_robot_navigation)/launch/OGmapping.launch">
    <arg name="ns" value="robot1"/>
    <arg name="x" value="0"/>
    <arg name="y" value="0"/>
    <arg name="theta" value="0"/>
  </include> -->

  <!--OGmapping Robo 2 
  <include file="$(find first_robot_navigation)/launch/OGmapping.launch">
    <arg name="ns" value="robot2"/>
    <arg name="x" value="-2"/>
    <arg name="y" value="-2"/>
    <arg name="theta" value="0"/>
  </include> -->

  <!--Multi Map Merge  -->
  <include file="$(find first_robot_navigation)/launch/multi_map_merge.launch"/>  
  
  <!--Run Rviz -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find first_robot_navigation)/Rviz/Multi_robot.rviz"/> 
  <!--node type="rviz" name="rviz" pkg="rviz" /--> 

  <!--Transforms-->
  <node pkg="tf" type="static_transform_publisher" name="world_to_$(arg first_tb3)_tf_broadcaster"  args="0 0 0 0 0 0 /map /$(arg first_tb3)/map 100"/>
  <node pkg="tf" type="static_transform_publisher" name="world_to_$(arg second_tb3)_tf_broadcaster" args="0 0 0 0 0 0 /map /$(arg second_tb3)/map 100"/>

<!--
  <node pkg="tf" type="static_transform_publisher" name="world_to_$(arg first_tb3)_tf_broadcaster_odom"  args="0 0 0 0 0 0 /$(arg first_tb3)/map /$(arg first_tb3)/odom 100"/>
  <node pkg="tf" type="static_transform_publisher" name="world_to_$(arg second_tb3)_tf_broadcaster_odom"  args="0 0 0 0 0 0 /$(arg second_tb3)/map /$(arg second_tb3)/odom 100"/>
-->

  <!--include file="$(find first_robot_navigation)/launch/move_base1.launch">
    <arg name="robot_namespace" value="robot1" />
  </include-->

  <!-- Open move_base for each robot in their ns 
  <group ns = "$(arg first_tb3)">
    <include file="$(find first_robot_navigation)/launch/move_base.launch">
    <arg name="ns"  value="$(arg first_tb3)"/>
    </include>
  </group>  

  <group ns = "$(arg second_tb3)"> 
    <include file="$(find first_robot_navigation)/launch/move_base.launch">
    <arg name="ns"  value="$(arg second_tb3)"/>
    </include> 
  </group>   -->

  <!-- Open Frontier Exploration for each robot 
  <node pkg="multi_robot_exploration" type="tb3_0_FE" name="tb3_0_FE"/>
  <node pkg="multi_robot_exploration" type="tb3_1_FE" name="tb3_1_FE"/> -->

</launch>


